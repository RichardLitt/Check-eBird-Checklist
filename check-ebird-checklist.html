<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Raphaël Nussbaumer">
<meta name="dcterms.date" content="2023-10-22">

<title>Check eBird Checklist</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script src="site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="site_libs/datatables-binding-0.30/datatables.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="site_libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="site_libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>
<link href="site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


</head>

<body class="fullcontent">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Check eBird Checklist</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Raphaël Nussbaumer </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">10/22/23</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(auk)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(writexl)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>According to the <a href="https://docs.google.com/document/d/1Hyl5puqky4-O2D6-DpseqcDZ2myhN4pKj2nz1rfxdjw/edit">eBird Volunteer Roles and Expectations</a>, eBird checklist reviewers are responsible for <strong>tagging eBird Checklists as Public or Not Public</strong>, following eBird standards<strong>:</strong></p>
<blockquote class="blockquote">
<ul>
<li><p>Evaluate entire eBird checklists to verify that checklist location, date, protocol, and other details are accurate.&nbsp;</p></li>
<li><p>Ensure that distance and duration are not excessively long for the situation and that checklists do not otherwise violate eBird data quality guidelines—holding observers to a uniform standard as outlined in the eBird Central guidelines.&nbsp;</p></li>
<li><p>When checklists marked Not Public could be improved and displayed publicly, inform the checklist owner of the necessary changes that would make their list(s) appropriate for public display.</p></li>
<li><p>Work with eBird Observation Reviewers and eBird Mentors when checklist-level data quality raises concerns about an observer’s eBird understanding, willingness, or ability to contribute useful data for eBird.</p></li>
<li><p>Maintain comprehensive understanding of eBird checklist review policies and follow those standards in the review process.</p></li>
</ul>
</blockquote>
<p>These responsibilities can be difficult to implement in practice as there is no tool to identify checklists violating eBird data quality guidelines. Below, we propose a series of checks that can be performed to identify these checklists using the <a href="https://support.ebird.org/en/support/solutions/articles/48000838205-download-ebird-data#anchorEBD"><strong>eBird Basic Dataset (EBD)</strong></a>.</p>
</section>
<section id="how-to-review-checklists" class="level2">
<h2 class="anchored" data-anchor-id="how-to-review-checklists">How to review checklists</h2>
<p>Detailed explanations on how to review checklists are provided in the <a href="https://drive.google.com/file/d/1zeGEwMt9vrJL3dvj1aAuYodErB8ikl3e/view?usp=drive_link">eBird Reviewer Handbook</a>:</p>
<blockquote class="blockquote">
<ul>
<li><p><strong>Checklist-Date Imprecise</strong>: Use this when an observer submits records from a correct location, but uses a date that is clearly incorrect. Some users submit lists spanning multiple days. eBird does not accept <strong>multi-day lists</strong> and it is best to make these checklists Not Public using this reason, even if they are otherwise correct. Obvious list-building efforts should be invalidated as Checklist-List Building and incorrectly plotted locations should be made Not Public using one of the Location review reasons below.</p></li>
<li><p><strong>Checklist-Distance Too Long</strong>: Mainland checklists of 80.5 km (50.0 miles) or longer, or High Seas checklists (https://ebird.org/region/XX) of 160.9 km (100.0 miles) or longer, are automatically tagged as Checklist-Distance Too Long. Reviewers can override this in rare cases, and if observers correct a typo (e.g., change 50 miles to 5.0 miles) then the checklist can be marked Public by a reviewer; editing the distance does not reverse the automatic tagging.<br>
One goal of review is to ensure that correctly identified records are plotted reasonably accurately, so that display on a map will not misrepresent the species’ range. In general, we believe that most checklists of 8 km (5 miles) or less should be accepted by reviewers and <strong>most checklists of 25 km (15 miles) or more should probably be marked Checklist-Distance Too Long</strong>, especially if they span multiple habitats. Reviewers must use their best judgment in all cases to not be overly restrictive, but to also steer observers towards shorter and more precise lists.</p></li>
<li><p><strong>Checklist-Error</strong>: This reason is to be used for miscellaneous issues with the checklist that are <strong>not covered by the other review reasons</strong> (one example would be a checklist reporting entirely captive birds from a zoo). This reason should almost always be accompanied by review notes explaining why the checklist was considered Not Public.</p></li>
<li><p><strong>Checklist-List Building:</strong> It is common for observers to create a life list or a state list by plotting a location or selecting a random point, picking a random date, and submitting a full list of what they’ve seen over the course of a lifetime or a trip to a given country or state. These do not represent serious attempts to submit data worthy of a scientific database, so these should be made Not Public. Records from these often are easily caught by our filters, and anytime these are identified the entire list should be marked Not Public with this reason. <strong>Note that we do formally recommend that users submit such lists using the date of 1 Jan 1900</strong> (see the <a href="https://support.ebird.org/en/support/solutions/articles/48000804866-enter-your-pre-ebird-life-list">Enter your pre- eBird life list article</a>) and records from this date are automatically tagged as Checklist-List Building and marked Not Public. If you encounter users entering different dates for such lists, please steer them to this article.</p></li>
<li><p><strong>Checklist-Multi-party:</strong> eBird is a system for collecting single-party checklists. If two or more observers go birding independently, these birding efforts should be submitted separately. If they are not, it is appropriate to make the list Not Public using this reason if the observer is unwilling to correct his or her list. Christmas Bird Count “sector” data is sometimes submitted this way as an aggregation from multiple independent parties, and this is the appropriate way to address those checklists.</p></li>
<li><p><strong>Checklist-Protocol Error</strong>: This reason is to be used when eBirders use protocols incorrectly. These could include custom protocols, like atlases or specialized surveys, or misuse of Traveling Count or Stationary count protocols. Also, Nocturnal flight call counts should use the special protocol since this makes assumptions about counts and detectability that do not affect eBird output. Please ask observers to change their Nocturnal Flight Call count submissions to this protocol; if they do not, marking them Not Public using this reason may be appropriate. <strong>Changing protocol does not automatically remove this tag, so this requires a reviewer.</strong></p></li>
<li><p><strong>Location-Issue</strong>: This review reason is to be used for any case where the observer has badly misplotted the location or has selected the incorrect location. Ideally, the reviewer would email the observer in such cases to inform him or her about the error. Note that use of country, state/province, or county-level locations (from “Submit for an entire country, state, county, or city”) will automatically treat checklists as Not Public using the appropriate review reason. For any Location review reason—including both reviewer-tagged checklists and automatically- tagged checklists—<strong>a correction of the location by the user (either a location move or selection of a different location) will remove this checklist-level flag</strong>. We assume in such cases that the observer has made the appropriate correction and if not, these will need to be located again; we do not give reviewer notification in such cases.</p></li>
</ul>
</blockquote>
</section>
<section id="read-ebd-database" class="level2">
<h2 class="anchored" data-anchor-id="read-ebd-database">Read EBD database</h2>
<p>To perform the checks below, start by downloading the EBD file for your region on <a href="https://ebird.org/data/download">eBird</a>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Downloading the EBD requires to <a href="https://ebird.org/data/request">submit a data request</a>.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># file &lt;- "data/ebd_KE_relAug-2022/ebd_KE_relAug-2022.txt"</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># file &lt;- "data/ebd_US-AL-101_202204_202204_relApr-2022_SAMPLE/ebd_US-AL-101_202204_202204_relApr-2022.txt"</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>file <span class="ot">&lt;-</span> <span class="st">"data/ebd_CH_smp_relAug-2023/ebd_CH_smp_relAug-2023.txt"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Read data with the R <a href="https://cornelllabofornithology.github.io/auk/">auk</a> package.</p>
<div class="cell" data-hash="check-ebird-checklist_cache/html/unnamed-chunk-2_b260a94a476fb237fbb768818596ffd1">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>obs_0 <span class="ot">&lt;-</span> <span class="fu">read_ebd</span>(file)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>In case this operation takes too much time, an alternative is to split the database on region/subregion or year.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>obs_0 <span class="ot">&lt;-</span> <span class="fu">auk_ebd</span>(file) <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># auk_country("Kenya") %&gt;% </span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># auk_state("KE-300") %&gt;% </span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># auk_county("KE-300") %&gt;% </span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">auk_year</span>(<span class="fu">seq</span>(<span class="dv">2010</span>,<span class="dv">2020</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># auk_date(date = c("2020-05-01", "2020-06-30"))</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># auk_complete() %&gt;%  # Only complete checklists</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">auk_filter</span>(<span class="at">file =</span> <span class="fu">tempfile</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_ebd</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To find a country, state or county, use the <a href="https://ebird.org/explore">Explore regions</a> search on eBird and use the code in the URL. Alternatively, you can also use the variable <code>ebird_states</code> in the auk package to list all countries and states.</p>
</div>
</div>
</section>
<section id="process-database-to-checklists" class="level2">
<h2 class="anchored" data-anchor-id="process-database-to-checklists">Process database to checklists</h2>
<p>Next, build the observation and checklist database.</p>
<div class="cell" data-hash="check-ebird-checklist_cache/html/unnamed-chunk-4_a8fdb9409f3b1f931543aa149f0bde6d">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>obs <span class="ot">&lt;-</span> obs_0 <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">group_id =</span> checklist_id,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">checklist_id =</span> sampling_event_identifier</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"group_id"</span>, <span class="st">"checklist_id"</span>, <span class="st">"taxonomic_order"</span>, <span class="st">"common_name"</span>, <span class="st">"observation_count"</span>,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"locality"</span>, <span class="st">"observation_date"</span>, <span class="st">"time_observations_started"</span>, <span class="st">"observer_id"</span>,</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"protocol_type"</span>, <span class="st">"duration_minutes"</span>, <span class="st">"effort_distance_km"</span>, <span class="st">"number_observers"</span>,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"all_species_reported"</span>, <span class="st">"has_media"</span>))</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Build checklist database</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>c <span class="ot">&lt;-</span> obs <span class="sc">%&gt;%</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">observation_count_num =</span> <span class="fu">as.numeric</span>(<span class="fu">ifelse</span>(observation_count <span class="sc">==</span> <span class="st">"X"</span>, <span class="cn">NA</span>, observation_count))</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group_id) <span class="sc">%&gt;%</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">number_species =</span> <span class="fu">n</span>(),</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">number_distinct_count =</span> <span class="fu">n_distinct</span>(observation_count),</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_count =</span> <span class="fu">median</span>(observation_count_num, <span class="at">na.rm =</span> T),</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">number_media =</span> <span class="fu">sum</span>(has_media)</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(group_id, taxonomic_order, common_name, observation_count, observation_count_num, has_media)) <span class="sc">%&gt;%</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Modify some columns for ease of use</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>c <span class="ot">&lt;-</span> c <span class="sc">%&gt;%</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">observation_date =</span> <span class="fu">ymd</span>(observation_date),</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">time_observations_started =</span> <span class="fu">hms</span>(time_observations_started, <span class="at">quiet =</span> T),</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">checklist_link =</span> <span class="fu">paste0</span>(<span class="st">"&lt;a href='https://ebird.org/checklist/"</span>, <span class="fu">str_extract</span>(checklist_id, <span class="st">"^[^,]+"</span>), <span class="st">"' target='_blank'&gt;"</span>, checklist_id, <span class="st">"&lt;/a&gt;"</span>),</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">all_species_reported =</span> all_species_reported <span class="sc">&amp;</span> protocol_type <span class="sc">!=</span> <span class="st">"Incidental"</span></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="explore-your-data" class="level2">
<h2 class="anchored" data-anchor-id="explore-your-data">Explore your data</h2>
<p>Here are some figures to get an overview of the checklists meta-data distribution. You might be able to already see some outliers/issues.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Duration</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Distance</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Number of observers</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false">Time of start</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-5" role="tab" aria-controls="tabset-1-5" aria-selected="false">Protocol type</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-6" role="tab" aria-controls="tabset-1-6" aria-selected="false">Number of species</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-7" role="tab" aria-controls="tabset-1-7" aria-selected="false">Number of species per distance</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-8-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-8" role="tab" aria-controls="tabset-1-8" aria-selected="false">Number of species per time</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>c <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(duration_minutes)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>duration_minutes<span class="sc">/</span><span class="dv">60</span>)) <span class="sc">+</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth=</span><span class="dv">15</span><span class="sc">/</span><span class="dv">60</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="check-ebird-checklist_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>c <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(effort_distance_km)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>effort_distance_km)) <span class="sc">+</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="check-ebird-checklist_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>c <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(number_observers)) <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>number_observers)) <span class="sc">+</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="check-ebird-checklist_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>c <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(time_observations_started)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">as.numeric</span>(time_observations_started, <span class="at">units=</span><span class="st">"hours"</span>))) <span class="sc">+</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="check-ebird-checklist_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-1-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-5-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>c <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y=</span>protocol_type)) <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="check-ebird-checklist_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-1-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-6-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>c <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(number_species)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>number_species)) <span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="check-ebird-checklist_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-1-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-7-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>c <span class="sc">%&gt;%</span> <span class="fu">filter</span>(all_species_reported <span class="sc">&amp;</span> protocol_type<span class="sc">==</span> <span class="st">"Traveling"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>effort_distance_km, <span class="at">y=</span>number_species)) <span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">col=</span><span class="fu">log</span>(duration_minutes))) <span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">"gam"</span>, <span class="at">formula =</span> y <span class="sc">~</span> <span class="fu">s</span>(x, <span class="at">bs =</span> <span class="st">"cs"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="check-ebird-checklist_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-1-8" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-8-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>c <span class="sc">%&gt;%</span> <span class="fu">filter</span>(all_species_reported <span class="sc">&amp;</span> duration_minutes<span class="sc">&lt;</span><span class="dv">12</span><span class="sc">*</span><span class="dv">60</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>duration_minutes<span class="sc">/</span><span class="dv">60</span>, <span class="at">y=</span>number_species)) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">"gam"</span>, <span class="at">formula =</span> y <span class="sc">~</span> <span class="fu">s</span>(x, <span class="at">bs =</span> <span class="st">"cs"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="check-ebird-checklist_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="checks" class="level2">
<h2 class="anchored" data-anchor-id="checks">Checks</h2>
<p>The core idea of this guide is to identify checklists which might have an issue based on a series of checks.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>It is essential that you manually adapt the value of the parameters used here to see if they make sense for your reviewing region. You might start with more permissive value at first and then reduce them later to catch more problematic checklists.</p>
</div>
</div>
<ul>
<li><p><code>chk_ampm</code> (<em>Error</em>): A frequent issue is for the time to be entered as AM instead of PM (i.e., in the middle of the night, rather than in the afternoon).</p></li>
<li><p><code>chk_midnight</code> (<em>Error</em>): Starting a checklist at midnight should be quite uncommon, but it’s often used by people to enter day-list or incorrectly add time on a historical/incidental list without time.</p></li>
<li><p><code>chk_multi_day</code> (<em>Protocol Error</em>): Checklists that span over two days are not valid.</p></li>
<li><p><code>chk_not_traveling</code> (<em>Protocol Error</em>): Traveling checklists of less than 30m should be entered as stationary.</p></li>
<li><p><code>chk_not_stationary</code> (<em>Protocol Error</em>): Staionary checklists with more than xx species are most likely traveling checklists.</p></li>
<li><p><code>chk_high_number_species</code> (<em>List Building</em> or <em>Date Imprecise</em>): Checklists with an exceptionally high number of species (relative to your region) are generally indicative of multi-day lists or list-building.</p></li>
<li><p><code>chk_only_one_species</code> (<em>Protocol Error</em>): A complete checklist with a single species is often indicative of incorrectly checking the “Complete” button.</p></li>
<li><p><code>chk_too_long_distance</code> (<em>Distance Too Long</em>): As mentioned in the guidelines, a checklist of more than xx km is susceptible to be distance too long.</p></li>
<li><p><code>chk_too_short_duration</code> (<em>Protocol Error</em>): Checklists with a high number of species relative to the duration are suspicious.</p></li>
<li><p><code>chk_too_fast</code> (<em>Protocol Error</em>): Catch protocol issues with incoherent duration and distance</p></li>
<li><p><code>chk_complete_media</code> (<em>Protocol Error</em>): Checklists marked as complete with a media for each species often tend to rather be “Incomplete” checklists.</p></li>
<li><p><code>chk_too_many_observers</code> (<em>Protocol Error</em>): Checklists with more than xx observers are often suspicious.</p></li>
<li><p><code>chk_specialized_protocol</code> (<em>Protocol Error</em>): You might want to check the use of non-standard protocols.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>chk <span class="ot">&lt;-</span> c <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">chk_ampm =</span> (time_observations_started <span class="sc">&gt;</span> <span class="fu">hm</span>(<span class="st">"22:00"</span>) <span class="sc">|</span> time_observations_started <span class="sc">&lt;</span> <span class="fu">hm</span>(<span class="st">"4:00"</span>)) <span class="sc">&amp;</span> </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>      (time_observations_started <span class="sc">+</span> <span class="fu">minutes</span>(duration_minutes) <span class="sc">&lt;</span> <span class="fu">hm</span>(<span class="st">"6:00"</span>)) <span class="sc">&amp;</span> </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>      number_species <span class="sc">&gt;</span> <span class="dv">10</span>,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">chk_midnight =</span> time_observations_started <span class="sc">==</span> <span class="fu">hms</span>(<span class="st">"00:00:00"</span>),</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">chk_high_number_species =</span> number_species<span class="sc">&gt;</span><span class="dv">90</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">chk_only_one_species =</span> all_species_reported <span class="sc">&amp;</span> number_species<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> duration_minutes <span class="sc">&gt;</span> <span class="dv">5</span>,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">chk_same_count_all_species =</span> all_species_reported <span class="sc">&amp;</span> median_count<span class="sc">&gt;</span><span class="dv">0</span> <span class="sc">&amp;</span> number_distinct_count<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> number_species<span class="sc">&gt;</span><span class="dv">2</span>,</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">chk_too_long_distance =</span> effort_distance_km <span class="sc">&gt;</span> <span class="dv">25</span>,</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">chk_multi_day =</span> time_observations_started <span class="sc">+</span> <span class="fu">minutes</span>(duration_minutes) <span class="sc">&gt;</span> <span class="fu">hours</span>(<span class="dv">24</span>),</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">chk_too_many_observers =</span> number_observers <span class="sc">&gt;</span> <span class="dv">30</span>,</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">chk_too_short_duration =</span> all_species_reported <span class="sc">&amp;</span> number_species<span class="sc">/</span>duration_minutes <span class="sc">&gt;</span> <span class="dv">10</span>,</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">chk_too_fast =</span> effort_distance_km<span class="sc">/</span>duration_minutes<span class="sc">*</span><span class="dv">60</span> <span class="sc">&gt;</span> <span class="dv">60</span>,</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">chk_complete_media =</span> all_species_reported <span class="sc">&amp;</span> number_media<span class="sc">==</span>number_species,</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">chk_not_stationary =</span> protocol_type <span class="sc">==</span> <span class="st">"Stationary"</span> <span class="sc">&amp;</span> number_species<span class="sc">&gt;</span><span class="dv">50</span>,</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">chk_specialized_protocol =</span> <span class="sc">!</span>(protocol_type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Historical"</span>, <span class="st">"Traveling"</span>, <span class="st">"Incidental"</span>, <span class="st">"Stationary"</span>)),</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">chk_not_traveling =</span> protocol_type<span class="sc">==</span><span class="st">"Traveling"</span> <span class="sc">&amp;</span> effort_distance_km <span class="sc">&lt;</span> <span class="fl">0.03</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">"chk_"</span>), <span class="sc">~</span><span class="fu">replace_na</span>(., <span class="cn">FALSE</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="check-overview" class="level3">
<h3 class="anchored" data-anchor-id="check-overview">Check overview</h3>
<p>In the table below you can view the number of checklists flagged for each check.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>chk <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(., <span class="fu">starts_with</span>(<span class="st">"chk_"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), sum)) <span class="sc">%&gt;%</span> </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">everything</span>(), <span class="at">names_to =</span> <span class="st">"Check"</span>, <span class="at">values_to =</span> <span class="st">"number_checklist"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(number_checklist)) <span class="sc">%&gt;%</span> </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">options =</span> <span class="fu">list</span>( <span class="at">pageLength =</span>  <span class="dv">50</span>)  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-0299e16e76907d4f6420" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-0299e16e76907d4f6420">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14"],["chk_only_one_species","chk_same_count_all_species","chk_complete_media","chk_too_long_distance","chk_too_fast","chk_multi_day","chk_specialized_protocol","chk_not_stationary","chk_not_traveling","chk_too_short_duration","chk_midnight","chk_too_many_observers","chk_ampm","chk_high_number_species"],[364,263,175,84,63,54,33,26,20,17,13,12,10,2]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Check<\/th>\n      <th>number_checklist<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":50,"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>The matrix below highlights the number of checklists flagged by two checks. We want to limit these as far as possible, but some overlap is unavoidable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span>  chk <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(., <span class="fu">starts_with</span>(<span class="st">"chk_"</span>))</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the matrix</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>co_occurrence_matrix <span class="ot">&lt;-</span> <span class="fu">t</span>(<span class="fu">as.matrix</span>(df)) <span class="sc">%*%</span> <span class="fu">as.matrix</span>(df)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Hide the lower right part of the matrix (symetric)</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(co_occurrence_matrix) <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>co_occurrence_matrix[<span class="fu">lower.tri</span>(co_occurrence_matrix, <span class="at">diag =</span> <span class="cn">TRUE</span>)] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(<span class="fu">as.table</span>(co_occurrence_matrix)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Var1, <span class="at">y =</span> Var2)) <span class="sc">+</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Freq), <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">"white"</span>, <span class="at">high =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> Freq), <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.5</span>), <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"Co-occurrence"</span>, <span class="at">x =</span> <span class="st">"Check"</span>, <span class="at">y =</span> <span class="st">"Check"</span>) <span class="sc">+</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>()  <span class="sc">+</span>  <span class="co"># ensures the tiles are square</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="check-ebird-checklist_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>For each check (edit the check name in the code below), you can also view the checklists flagged by eobserver.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>chk <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(chk_too_long_distance) <span class="sc">%&gt;%</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(rowSums(select(., starts_with("chk_"))) &gt; 0) %&gt;% </span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(observer_id=="obsr497615") %&gt;% </span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(observer_id) <span class="sc">%&gt;%</span> </span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(effort_distance_km)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">checklist_link =</span> <span class="fu">toString</span>(checklist_link), <span class="at">number_checklist =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># arrange(desc(number_checklist)) %&gt;% </span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">escape =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-d43473e01c1de42f5772" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-d43473e01c1de42f5772">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50"],["obsr1013354","obsr1052543","obsr1059657","obsr1088487","obsr1116191","obsr114446","obsr1163852","obsr1191554","obsr1225843","obsr131080","obsr1315853","obsr141946","obsr1427436","obsr1458429","obsr1458442","obsr1475697","obsr1685417","obsr1918546","obsr211904","obsr222916","obsr24607","obsr294272","obsr295352","obsr297534","obsr304411","obsr3385720","obsr342867","obsr345551","obsr349499","obsr354957","obsr399168","obsr425626","obsr439228","obsr450783","obsr470417","obsr48571","obsr497615","obsr507449","obsr541438,obsr951781","obsr548267","obsr553825","obsr609484","obsr626605","obsr720506","obsr808609","obsr840090","obsr919359","obsr980281","obsr991711","obsr998296"],["<a href='https://ebird.org/checklist/S60082721' target='_blank'>S60082721<\/a>","<a href='https://ebird.org/checklist/S67401110' target='_blank'>S67401110<\/a>","<a href='https://ebird.org/checklist/S60545330' target='_blank'>S60545330<\/a>","<a href='https://ebird.org/checklist/S46522172' target='_blank'>S46522172<\/a>","<a href='https://ebird.org/checklist/S67451808' target='_blank'>S67451808<\/a>","<a href='https://ebird.org/checklist/S8712047' target='_blank'>S8712047<\/a>","<a href='https://ebird.org/checklist/S72804142' target='_blank'>S72804142<\/a>","<a href='https://ebird.org/checklist/S56486707' target='_blank'>S56486707<\/a>","<a href='https://ebird.org/checklist/S56810130' target='_blank'>S56810130<\/a>","<a href='https://ebird.org/checklist/S10320315' target='_blank'>S10320315<\/a>, <a href='https://ebird.org/checklist/S10236678' target='_blank'>S10236678<\/a>, <a href='https://ebird.org/checklist/S15073698' target='_blank'>S15073698<\/a>","<a href='https://ebird.org/checklist/S67301349' target='_blank'>S67301349<\/a>","<a href='https://ebird.org/checklist/S14703455' target='_blank'>S14703455<\/a>","<a href='https://ebird.org/checklist/S66349718' target='_blank'>S66349718<\/a>","<a href='https://ebird.org/checklist/S60578881' target='_blank'>S60578881<\/a>","<a href='https://ebird.org/checklist/S69970908' target='_blank'>S69970908<\/a>, <a href='https://ebird.org/checklist/S60578875' target='_blank'>S60578875<\/a>","<a href='https://ebird.org/checklist/S63041115' target='_blank'>S63041115<\/a>","<a href='https://ebird.org/checklist/S68798423' target='_blank'>S68798423<\/a>","<a href='https://ebird.org/checklist/S101023846' target='_blank'>S101023846<\/a>","<a href='https://ebird.org/checklist/S74660262' target='_blank'>S74660262<\/a>, <a href='https://ebird.org/checklist/S68783746' target='_blank'>S68783746<\/a>, <a href='https://ebird.org/checklist/S75089433' target='_blank'>S75089433<\/a>, <a href='https://ebird.org/checklist/S69143856' target='_blank'>S69143856<\/a>, <a href='https://ebird.org/checklist/S68308598' target='_blank'>S68308598<\/a>, <a href='https://ebird.org/checklist/S66660650' target='_blank'>S66660650<\/a>, <a href='https://ebird.org/checklist/S66034647' target='_blank'>S66034647<\/a>","<a href='https://ebird.org/checklist/S18373200' target='_blank'>S18373200<\/a>","<a href='https://ebird.org/checklist/S13578905' target='_blank'>S13578905<\/a>","<a href='https://ebird.org/checklist/S57868245' target='_blank'>S57868245<\/a>","<a href='https://ebird.org/checklist/S30702672' target='_blank'>S30702672<\/a>, <a href='https://ebird.org/checklist/S30702567' target='_blank'>S30702567<\/a>, <a href='https://ebird.org/checklist/S30686306' target='_blank'>S30686306<\/a>, <a href='https://ebird.org/checklist/S30686161' target='_blank'>S30686161<\/a>, <a href='https://ebird.org/checklist/S30685833' target='_blank'>S30685833<\/a>, <a href='https://ebird.org/checklist/S30702691' target='_blank'>S30702691<\/a>, <a href='https://ebird.org/checklist/S30708077' target='_blank'>S30708077<\/a>, <a href='https://ebird.org/checklist/S30685137' target='_blank'>S30685137<\/a>, <a href='https://ebird.org/checklist/S30701407' target='_blank'>S30701407<\/a>, <a href='https://ebird.org/checklist/S30701438' target='_blank'>S30701438<\/a>, <a href='https://ebird.org/checklist/S30685271' target='_blank'>S30685271<\/a>, <a href='https://ebird.org/checklist/S30685225' target='_blank'>S30685225<\/a>, <a href='https://ebird.org/checklist/S30708149' target='_blank'>S30708149<\/a>","<a href='https://ebird.org/checklist/S31830774' target='_blank'>S31830774<\/a>, <a href='https://ebird.org/checklist/S25424514' target='_blank'>S25424514<\/a>","<a href='https://ebird.org/checklist/S53924071' target='_blank'>S53924071<\/a>","<a href='https://ebird.org/checklist/S118554332' target='_blank'>S118554332<\/a>","<a href='https://ebird.org/checklist/S13789133' target='_blank'>S13789133<\/a>","<a href='https://ebird.org/checklist/S59904302' target='_blank'>S59904302<\/a>, <a href='https://ebird.org/checklist/S59855961' target='_blank'>S59855961<\/a>","<a href='https://ebird.org/checklist/S100437864' target='_blank'>S100437864<\/a>, <a href='https://ebird.org/checklist/S100437616' target='_blank'>S100437616<\/a>","<a href='https://ebird.org/checklist/S24383680' target='_blank'>S24383680<\/a>","<a href='https://ebird.org/checklist/S59077434' target='_blank'>S59077434<\/a>","<a href='https://ebird.org/checklist/S52518862' target='_blank'>S52518862<\/a>","<a href='https://ebird.org/checklist/S17931107' target='_blank'>S17931107<\/a>","<a href='https://ebird.org/checklist/S32182733' target='_blank'>S32182733<\/a>","<a href='https://ebird.org/checklist/S39596162' target='_blank'>S39596162<\/a>","<a href='https://ebird.org/checklist/S59450971' target='_blank'>S59450971<\/a>","<a href='https://ebird.org/checklist/S48289739' target='_blank'>S48289739<\/a>, <a href='https://ebird.org/checklist/S49091366' target='_blank'>S49091366<\/a>, <a href='https://ebird.org/checklist/S25144751' target='_blank'>S25144751<\/a>, <a href='https://ebird.org/checklist/S48538824' target='_blank'>S48538824<\/a>, <a href='https://ebird.org/checklist/S40044488' target='_blank'>S40044488<\/a>, <a href='https://ebird.org/checklist/S39402262' target='_blank'>S39402262<\/a>, <a href='https://ebird.org/checklist/S38830063' target='_blank'>S38830063<\/a>, <a href='https://ebird.org/checklist/S60451003' target='_blank'>S60451003<\/a>, <a href='https://ebird.org/checklist/S38959473' target='_blank'>S38959473<\/a>","<a href='https://ebird.org/checklist/S30470883' target='_blank'>S30470883<\/a>","<a href='https://ebird.org/checklist/S33341920' target='_blank'>S33341920,S38615358<\/a>","<a href='https://ebird.org/checklist/S59963379' target='_blank'>S59963379<\/a>, <a href='https://ebird.org/checklist/S59963372' target='_blank'>S59963372<\/a>","<a href='https://ebird.org/checklist/S68614037' target='_blank'>S68614037<\/a>","<a href='https://ebird.org/checklist/S30420375' target='_blank'>S30420375<\/a>","<a href='https://ebird.org/checklist/S38654803' target='_blank'>S38654803<\/a>","<a href='https://ebird.org/checklist/S56146928' target='_blank'>S56146928<\/a>","<a href='https://ebird.org/checklist/S71982461' target='_blank'>S71982461<\/a>","<a href='https://ebird.org/checklist/S67545511' target='_blank'>S67545511<\/a>","<a href='https://ebird.org/checklist/S70089161' target='_blank'>S70089161<\/a>","<a href='https://ebird.org/checklist/S41100292' target='_blank'>S41100292<\/a>","<a href='https://ebird.org/checklist/S61723411' target='_blank'>S61723411<\/a>","<a href='https://ebird.org/checklist/S54574866' target='_blank'>S54574866<\/a>, <a href='https://ebird.org/checklist/S54574510' target='_blank'>S54574510<\/a>"],[1,1,1,1,1,1,1,1,1,3,1,1,1,1,2,1,1,1,7,1,1,1,13,2,1,1,1,2,2,1,1,1,1,1,1,1,9,1,1,2,1,1,1,1,1,1,1,1,1,2]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>observer_id<\/th>\n      <th>checklist_link<\/th>\n      <th>number_checklist<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="export" class="level3">
<h3 class="anchored" data-anchor-id="export">Export</h3>
<p>To facilitate managing such a high number of checklists and keep track of your review progress, export the checklists as a spreadsheet using the code below.</p>
<div class="cell" data-run="false">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xlsx</span>(chk,<span class="st">"data/export_ebd_checklist_checked.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="email-templates" class="level2">
<h2 class="anchored" data-anchor-id="email-templates">Email templates</h2>
<p>Below we provide suggested text for emailing users tailored for each check.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>The objectives of emailing users is to (1) make them aware of this error and avoid them reproducing such errors in the future and (2) get them to correct their checklist.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>template <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">a =</span><span class="st">"</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="st">Dear [name],</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="st">Thank you for being a part of eBird. To help make sure that eBird can be used for scientific research and conservation, volunteers like me follow up on unusual observations as a part of the eBird data quality process.</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="st">"</span>,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">checklist =</span> <span class="st">"</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="st">I am writing about the following checklist(s): {checklists_link}</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="st">"</span>,</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">z =</span> <span class="st">"</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="st">Could you please check these checklists, and make any potential corrections. Let me know when you're done, so that I can set the checklist as public again.</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="st">Thanks in advance,</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="st">Raphaël Nussbaumer</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="st">"</span>,</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">ampm =</span> <span class="st">"</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a><span class="st">Your checklist(s) was flagged because it has an unusual start time, with a potential confusion between AM and PM. If no start time is available, the checklist protocol should be &lt;a href=</span><span class="sc">\"</span><span class="st">https://support.ebird.org/en/support/solutions/articles/48000950859-guide-to-ebird-protocols#anchorHistorical</span><span class="sc">\"</span><span class="st">&gt;historical&lt;/a&gt; if birding was your &lt;a href=</span><span class="sc">\"</span><span class="st">https://support.ebird.org/en/support/solutions/articles/48000967748-birding-as-your-primary-purpose-and-complete-checklists</span><span class="sc">\"</span><span class="st">&gt;primary purpose&lt;/a&gt; or &lt;a href=</span><span class="sc">\"</span><span class="st">https://support.ebird.org/en/support/solutions/articles/48000950859-guide-to-ebird-protocols#anchorIncidental</span><span class="sc">\"</span><span class="st">&gt;incidental&lt;/a&gt; if birding was not your primary purpose. In both cases, you can leave the time field empty. </span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a><span class="st">"</span>,</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">ampm_midnight =</span> <span class="st">"</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a><span class="st">Your checklist(s) was flagged because it is unusual to start a checklist at exactly midnight. If no start time is available, the checklist protocol should be &lt;a href=</span><span class="sc">\"</span><span class="st">https://support.ebird.org/en/support/solutions/articles/48000950859-guide-to-ebird-protocols#anchorHistorical</span><span class="sc">\"</span><span class="st">&gt;historical&lt;/a&gt; if birding was your &lt;a href=</span><span class="sc">\"</span><span class="st">https://support.ebird.org/en/support/solutions/articles/48000967748-birding-as-your-primary-purpose-and-complete-checklists</span><span class="sc">\"</span><span class="st">&gt;primary purpose&lt;/a&gt; or &lt;a href=</span><span class="sc">\"</span><span class="st">https://support.ebird.org/en/support/solutions/articles/48000950859-guide-to-ebird-protocols#anchorIncidental</span><span class="sc">\"</span><span class="st">&gt;incidental&lt;/a&gt; if birding was not your primary purpose. In both cases, you can leave the time field empty. </span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a><span class="st">"</span>,</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a><span class="at">high_number_species =</span> <span class="st">"</span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a><span class="st">Your checklist(s) was flagged because it contains an unusually high number of species. We want to double check with you that the checklist follows &lt;a href=</span><span class="sc">\"</span><span class="st">https://support.ebird.org/en/support/solutions/articles/48000795623-ebird-rules-and-best-practices</span><span class="sc">\"</span><span class="st">&gt;eBird rules and best practices&lt;/a&gt;, in particular:</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a><span class="st">- Correspond to a single calendar date: checklists should not span multiple</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a><span class="st">days. &lt;b&gt;Were all species seen/heard from the start time of your checklist up to the duration set in your checklist?&lt;/b&gt;</span></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a><span class="st">- Correspond to a single map location: birds from different map regions should not be combined on one list. &lt;b&gt;Were all species reported seen/heard within the distance set in your checklist, centered around the location of the checklist?&lt;/b&gt; </span></span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a><span class="st">- Correspond to the &lt;a href=</span><span class="sc">\"</span><span class="st">https://support.ebird.org/en/support/solutions/articles/48000950859-guide-to-ebird-protocols</span><span class="sc">\"</span><span class="st">&gt;appropriate protocol&lt;/a&gt;.</span></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a><span class="st">"</span>,</span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a><span class="at">too_long_distance =</span> <span class="st">"</span></span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a><span class="st">Your checklist(s) was flagged because it as an usually high distance. While it is acceptable to make a checklist of up to 80km according to the &lt;a href=</span><span class="sc">\"</span><span class="st">https://support.ebird.org/en/support/solutions/articles/48000795623-ebird-rules-and-best-practices</span><span class="sc">\"</span><span class="st">&gt;eBird rules and best practices&lt;/a&gt;, more precise checklists are more valuable for science. It is therefore recommended to keep Traveling checklists under 8 km and Stationary checklists under 3 hours for your sightings to make the biggest impact for science. Limiting your checklists to less than one hour or 1.5 km provides even more checklist precision! Please do not submit one checklist spanning several locations, especially when those locations were separated by long drives. A good rule of thumb is: every time you get in a car, stop the previous list and start a new list at the next location.</span></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a><span class="st">"</span>,</span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a><span class="at">only_one_species =</span> <span class="st">"</span></span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a><span class="st">Your checklist(s) was flagged because it is a complete checklist with only a single species. While this might be correct, we wanted to double check with you that birding was indeed your primary purpose and you recorded all the birds around you to the best of your abilities. (Please refer to the &lt;a href=</span><span class="sc">\"</span><span class="st">https://support.ebird.org/en/support/solutions/articles/48000967748-birding-as-your-primary-purpose-and-complete-checklistss</span><span class="sc">\"</span><span class="st">&gt;eBird support help page&lt;/a&gt; for more information). If not, you can change the protocol to 'Incidental' or mark your list as 'Incomplete'.</span></span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a><span class="st">"</span>,</span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a><span class="at">multi_day =</span> <span class="st">"</span></span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a><span class="st">Your checklist(s) was flagged because of its unusually high duration. According to the &lt;a href=</span><span class="sc">\"</span><span class="st">https://support.ebird.org/en/support/solutions/articles/48000795623-ebird-rules-and-best-practices</span><span class="sc">\"</span><span class="st">&gt;eBird rules and best practices&lt;/a&gt;, checklists should &lt;b&gt;correspond to a single calendar date and should not span multiple days&lt;/b&gt;.</span></span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a><span class="st">"</span>,</span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a><span class="at">complete_media =</span> <span class="st">"</span></span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a><span class="st">Your checklist(s) was flagged because it is a complete checklist and we suspect that not all birds were reported. While this might be correct, we wanted to double check whether birding was indeed your primary purpose and that you have recorded all the birds around you to the best of your abilities. (Please refer to the &lt;a href=</span><span class="sc">\"</span><span class="st">https://support.ebird.org/en/support/solutions/articles/48000967748-birding-as-your-primary-purpose-and-complete-checklistss</span><span class="sc">\"</span><span class="st">&gt;eBird support help page&lt;/a&gt; for more information). If not, you can change the protocol to 'Incidental' or mark your list as 'Incomplete'. </span></span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a><span class="st">"</span>,</span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a><span class="at">same_count_all_species =</span> <span class="st">"</span></span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a><span class="st">Your checklist(s) was flagged because all species were recorded with the same count. We wanted to double check with you that these counts are indeed correct (see more on &lt;a href=</span><span class="sc">\"</span><span class="st">https://support.ebird.org/en/support/solutions/articles/48000838845</span><span class="sc">\"</span><span class="st">&gt;how to count birds with eBird&lt;/a&gt;). If you did not count the birds, you can udpate the count to </span><span class="sc">\"</span><span class="st">X</span><span class="sc">\"</span><span class="st">.</span></span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a><span class="st">"</span>,</span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a><span class="at">not_stationary =</span> <span class="st">"</span></span>
<span id="cb19-46"><a href="#cb19-46" aria-hidden="true" tabindex="-1"></a><span class="st">Your checklist(s) was flagged because we suspect that the stationary protocol might not be adequate. Can you check the &lt;a href=</span><span class="sc">\"</span><span class="st">https://support.ebird.org/en/support/solutions/articles/48000950859-guide-to-ebird-protocols#anchorStationary</span><span class="sc">\"</span><span class="st">&gt;guide to eBird protocol&lt;/a&gt; and adjust the protocol if necessary? If you're unable to estimate the distance covered, the Historical protocol would be a good choice. </span></span>
<span id="cb19-47"><a href="#cb19-47" aria-hidden="true" tabindex="-1"></a><span class="st">"</span>,</span>
<span id="cb19-48"><a href="#cb19-48" aria-hidden="true" tabindex="-1"></a><span class="at">not_traveling =</span> <span class="st">"</span></span>
<span id="cb19-49"><a href="#cb19-49" aria-hidden="true" tabindex="-1"></a><span class="st">Your checklist(s) was flagged because it has a traveling protocol with a distance smaller than 30m. According to &lt;a href=</span><span class="sc">\"</span><span class="st">https://support.ebird.org/en/support/solutions/articles/48000950859-guide-to-ebird-protocols#anchorTraveling</span><span class="sc">\"</span><span class="st">&gt;the guide to eBird protocols&lt;/a&gt;, checklists with a distance smaller than 30m should be set as Stationary.</span></span>
<span id="cb19-50"><a href="#cb19-50" aria-hidden="true" tabindex="-1"></a><span class="st">"</span>,</span>
<span id="cb19-51"><a href="#cb19-51" aria-hidden="true" tabindex="-1"></a><span class="at">too_fast =</span> <span class="st">"</span></span>
<span id="cb19-52"><a href="#cb19-52" aria-hidden="true" tabindex="-1"></a><span class="st">Your checklist(s) was flagged because we suspect a potential issue with the distance and duration entered. Could you double check the values entered and verify the validity of the protocol selected according to the &lt;a href=</span><span class="sc">\"</span><span class="st">https://support.ebird.org/en/support/solutions/articles/48000795623-ebird-rules-and-best-practices</span><span class="sc">\"</span><span class="st">&gt;eBird rules and best practices&lt;/a&gt;?</span></span>
<span id="cb19-53"><a href="#cb19-53" aria-hidden="true" tabindex="-1"></a><span class="st">"</span>,</span>
<span id="cb19-54"><a href="#cb19-54" aria-hidden="true" tabindex="-1"></a><span class="at">too_short_duration =</span> <span class="st">"</span></span>
<span id="cb19-55"><a href="#cb19-55" aria-hidden="true" tabindex="-1"></a><span class="st">Your checklist(s) was flagged because we suspect a potential issue with the duration entered. Could you double check the value entered and verify the validity of the protocol selected according to the &lt;a href=</span><span class="sc">\"</span><span class="st">https://support.ebird.org/en/support/solutions/articles/48000795623-ebird-rules-and-best-practices</span><span class="sc">\"</span><span class="st">&gt;eBird rules and best practices&lt;/a&gt;?</span></span>
<span id="cb19-56"><a href="#cb19-56" aria-hidden="true" tabindex="-1"></a><span class="st">"</span>,</span>
<span id="cb19-57"><a href="#cb19-57" aria-hidden="true" tabindex="-1"></a><span class="at">too_many_observers =</span> <span class="st">"</span></span>
<span id="cb19-58"><a href="#cb19-58" aria-hidden="true" tabindex="-1"></a><span class="st">Your checklist(s) was flagged because of the high number of observers. Maybe there is an error in this number?</span></span>
<span id="cb19-59"><a href="#cb19-59" aria-hidden="true" tabindex="-1"></a><span class="st">"</span>,</span>
<span id="cb19-60"><a href="#cb19-60" aria-hidden="true" tabindex="-1"></a><span class="at">specialized_protocol =</span> <span class="st">"</span></span>
<span id="cb19-61"><a href="#cb19-61" aria-hidden="true" tabindex="-1"></a><span class="st">Your checklist(s) was flagged because it uses a specialized protocol. Please make sure the use of the protocol is appropriate according to &lt;a href=</span><span class="sc">\"</span><span class="st">https://support.ebird.org/en/support/solutions/articles/48000950859-guide-to-ebird-protocols#anchorSpecialized</span><span class="sc">\"</span><span class="st">&gt;eBird guide to protocols&lt;/a&gt;."</span></span>
<span id="cb19-62"><a href="#cb19-62" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="email-per-check" class="level3">
<h3 class="anchored" data-anchor-id="email-per-check">Email per check</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>chk_names <span class="ot">&lt;-</span> chk <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"chk_"</span>)) <span class="sc">%&gt;%</span> <span class="fu">names</span>()</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (chk_i <span class="cf">in</span> chk_names){</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  email <span class="ot">&lt;-</span> chk <span class="sc">%&gt;%</span> </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!!</span><span class="fu">sym</span>(chk_i)) <span class="sc">%&gt;%</span> </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(observer_id) <span class="sc">%&gt;%</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">checklists_link =</span> <span class="fu">paste</span>(checklist_link, <span class="at">collapse =</span> <span class="st">", "</span>), <span class="at">number_checklist =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(number_checklist)) <span class="sc">%&gt;%</span> </span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue_data</span>(<span class="fu">paste0</span>(template<span class="sc">$</span>a, template<span class="sc">$</span>checklist, template[[<span class="fu">gsub</span>(<span class="st">"chk_"</span>, <span class="st">""</span>,chk_i)]], template<span class="sc">$</span>z), <span class="at">.sep =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">----</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  fileConn<span class="ot">&lt;-</span><span class="fu">file</span>(<span class="fu">paste0</span>(<span class="st">"email/"</span>, <span class="fu">gsub</span>(<span class="st">"chk_"</span>, <span class="st">""</span>,chk_i), <span class="st">".txt"</span>))</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">writeLines</span>(email, fileConn)</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">close</span>(fileConn)</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="combined" class="level3">
<h3 class="anchored" data-anchor-id="combined">Combined</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>observer <span class="ot">&lt;-</span> chk_combined <span class="ot">&lt;-</span> chk <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">rowSums</span>(<span class="fu">select</span>(., <span class="fu">starts_with</span>(<span class="st">"chk_"</span>))) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(observer_id) <span class="sc">%&gt;%</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="fu">n</span>())) <span class="sc">%&gt;%</span> </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(observer_id) <span class="sc">%&gt;%</span> </span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>email <span class="ot">&lt;-</span> <span class="st">""</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>chk_names <span class="ot">&lt;-</span> chk <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"chk_"</span>), <span class="sc">-</span><span class="fu">c</span>(chk_midnight, chk_ampm) ) <span class="sc">%&gt;%</span> <span class="fu">names</span>()</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (obs_i <span class="cf">in</span> observer){</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>  chk_obs <span class="ot">&lt;-</span> chk <span class="sc">%&gt;%</span> </span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(observer_id <span class="sc">==</span> obs_i)</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  email <span class="ot">&lt;-</span> <span class="fu">paste0</span>(email, template<span class="sc">$</span>a , <span class="st">"We performed some automatic checks and the following checklists were identified as having potential issues with protocols. We detail below for each of them what might be incorrect and how to fix them.</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (chk_i <span class="cf">in</span> chk_names){</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>    checklist_link <span class="ot">&lt;-</span> chk_obs <span class="sc">%&gt;%</span> </span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!!</span><span class="fu">sym</span>(chk_i)) <span class="sc">%&gt;%</span> </span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">pull</span>(checklist_link) <span class="sc">%&gt;%</span> </span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">", "</span>)</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (checklist_link <span class="sc">!=</span> <span class="st">""</span>){</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>      email <span class="ot">&lt;-</span> <span class="fu">paste0</span>(email, </span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"&lt;b&gt;"</span>, <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">b([a-z])"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">U</span><span class="sc">\\</span><span class="st">1"</span>, <span class="fu">gsub</span>(<span class="st">"_"</span>, <span class="st">" "</span>, <span class="fu">gsub</span>(<span class="st">"chk_"</span>, <span class="st">""</span>,chk_i)), <span class="at">perl=</span><span class="cn">TRUE</span>) , <span class="st">"&lt;/b&gt;: "</span>,</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>                      checklist_link, </span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>                      template[[<span class="fu">gsub</span>(<span class="st">"chk_"</span>, <span class="st">""</span>,chk_i)]],</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>  email <span class="ot">&lt;-</span> <span class="fu">paste0</span>(email, <span class="st">"</span><span class="sc">\n</span><span class="st">Best wishes,</span><span class="sc">\n</span><span class="st">----</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>fileConn<span class="ot">&lt;-</span><span class="fu">file</span>(<span class="fu">paste0</span>(<span class="st">"email/combined_per_observer.txt"</span>))</span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">writeLines</span>(email, fileConn)</span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">close</span>(fileConn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>